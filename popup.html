<script type="text/javascript" src="/js/lib/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="/js/lib/jquery-ui-1.8.18.custom.min.js"></script>
<script type="text/javascript" src="/js/lib/underscore.js"></script>
<script type="text/javascript" src="/js/lib/backbone.js"></script>
<script type="text/javascript" src="/js/assembla_spaces.js"></script>
<script type="text/javascript" src="/js/assembla_timelogs.js"></script>

<script type="text/template" id="spaces-tab-space">

    <div id="space-links">
      <a class="space-link first-space-link" id="wiki-link" href="<%= AssemblaApp.getSpaceBaseUrl( space.wiki_name ) %>/wiki">Wiki</a>
      <a class="space-link" id="files-link" href="<%= AssemblaApp.getSpaceBaseUrl( space.wiki_name ) %>/documents">Files</a>
      <a class="space-link" id="tickets-link"  href="<%= AssemblaApp.getSpaceBaseUrl( space.wiki_name ) %>/tickets">Tickets</a>
      <a class="space-link" id="time-link" href="<%= AssemblaApp.getSpaceBaseUrl( space.wiki_name ) %>/time_entries">Time</a>
    </div>

    <div id="spaces-tab-ticket-div" style="margin-bottom:18px;margin-top:18px;">

    </div>

</script>



<script type="text/template" id="spaces-tab">
  <select id="assembla-spaces">
      <option value="0">Project Name</option>
      <% _.each( spaces, function( space ){ %>
      <option value="<%= space.id %>"><%= space.name %></option>
      <% }); %>
  </select>
  <div id="ticket-finder" style="margin-bottom:18px;"> </div>
</script>


<script type="text/template" id="ticket-accordion">
  <h3>
    <a href="#">
      <span class='ticket-desc'><%= ticket.number %>: <%= ticket.summary %></span>
      <span class='ticket-due <%= ticket.date_class %>'><%= ticket.date_string %></span>
      <span class='ticket-est'><%= ticket.estimate %></span>
      <span style='display:block;clear:both;'></span>
    </a>
  </h3>
  <div>
    <span class="space_name"><%= AssemblaApp.getSpaceName(ticket.space_id) %></span>
    <a class="space-link gototicket" href='<%= AssemblaApp.getSpaceBaseUrl( AssemblaApp.getWikiName(ticket.space_id) ) + "/tickets/" + ticket.number %>'>Go to Ticket</a>
    <div style="clear:both;"></div>
    <ul class="ticket_info">
      <li><div class="left-column">Status:</div><div class="right-column"><%= ticket.status_name %></div><div style="clear:both;" /></li>
      <li><div class="left-column">Due Date:</div><div class="right-column"><%= ticket.date_string %></div><div style="clear:both;" /></li>
      <li><div class="left-column">Estimate:</div><div class="right-column"><%= ticket.estimate %></div><div style="clear:both;" /></li>
      <li><div class="left-column">Hours Invested:</div><div class="right-column"><%= ticket.invested_hours %></div><div style="clear:both;" /></li>
      <li>Description:</li>
      <li><%= ticket.description %></li>
    </ul>
  </div>
</script>

<script type="text/template" id="timelog-accordion">
  <h3 class='<%= timelog.id%>'>
    <a href="#">
      <span class='timelog-name'><%= timelog.ticket_name %></span>
      <span class='timelog-hours'><%= timelog.hours %></span>
      <span style='display:block;clear:both;'></span>
    </a>
  </h3>
  <div class='<%= timelog.id%>'>
    <ul class='timelog-info'>
      <li>Description:</li>
      <li><%= timelog.description %></li>
    </ul>
  </div>
</script>

<script type="text/javascript">
  jQuery(document).ready(function(){
      jQuery("#tabs").tabs();
  });
</script>


<link   type="text/css" href="/css/lib/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
<link   type="text/css" href="/css/popup.css" rel="stylesheet" />


<div id="tabs">
<ul>
  <li><a href="#tabs-1">Tickets</a></li>
  <li><a href="#tabs-2">Spaces</a></li>
  <li><a href="#tabs-3">Time</a></li>
</ul>
<div id="tabs-1">
  <div id="ticket-div" style="margin-bottom:18px;">
    <div class="loader-bar"></div>
  </div>
</div>
<div id="tabs-2">
    <div class="loader-bar"></div>
</div>
<div id="tabs-3">
  <div id="active_time_log"></div>
  <div id="previous_time_logs">
    <div class="loader-bar"></div>
  </div>
</div>
